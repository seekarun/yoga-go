{
  "info": {
    "name": "Cally API",
    "description": "API collection for Cally - Landing Pages, Calendar, Domain & Email, AI Assistant",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3113"
    },
    {
      "key": "cronSecret",
      "value": "your-cron-secret-here"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Signup",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"Password123!\",\n  \"name\": \"Test User\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/cognito/signup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "cognito", "signup"]
            },
            "description": "Register a new user with Cognito. Creates a tenant with ULID."
          }
        },
        {
          "name": "Verify Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/cognito/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "cognito", "verify"]
            },
            "description": "Verify email with confirmation code from Cognito."
          }
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/cognito/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "cognito", "login"]
            },
            "description": "Login with email and password."
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            },
            "description": "Get the current authenticated user with tenant ID."
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            },
            "description": "Logout the current user."
          }
        }
      ]
    },
    {
      "name": "Tenant - Public",
      "item": [
        {
          "name": "Get Tenant Landing Page",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Get public tenant data with landing page config."
          }
        },
        {
          "name": "Get Booking Slots",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/booking/slots?date=2026-02-09",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "booking",
                "slots"
              ],
              "query": [
                {
                  "key": "date",
                  "value": "2026-02-09"
                }
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Get available 30-minute booking slots for a date. Returns slots with availability status based on business hours and existing calendar events."
          }
        },
        {
          "name": "Create Booking",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"visitorName\": \"Jane Smith\",\n  \"visitorEmail\": \"jane@example.com\",\n  \"note\": \"First time visitor\",\n  \"startTime\": \"2026-02-09T22:00:00.000Z\",\n  \"endTime\": \"2026-02-09T22:30:00.000Z\",\n  \"productId\": \"optional-product-uuid\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/booking",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "booking"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Create a booking. Validates slot availability to prevent double-booking. Creates a calendar event with title 'Booking: {name}'. Optional productId links booking to a product (overrides slot duration)."
          }
        },
        {
          "name": "Get Active Products (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "products"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Get active products for a tenant (public). Returns { products: Product[], currency: string }. Products sorted by sortOrder asc."
          }
        },
        {
          "name": "Get Booking Slots (with Product)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/booking/slots?date=2026-02-09&productId=product-uuid",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "booking",
                "slots"
              ],
              "query": [
                {
                  "key": "date",
                  "value": "2026-02-09"
                },
                {
                  "key": "productId",
                  "value": "product-uuid"
                }
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Get available booking slots for a date with product-specific duration. If productId is provided, slot duration comes from the product's durationMinutes instead of the default booking config."
          }
        },
        {
          "name": "Cancel Booking - Preview (Public)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/booking/cancel?token=eyJ0ZW5hbnRJZCI6IjAxSFhZWi4uLiIsImV2ZW50SWQiOiJldnRfMTIzIiwiZGF0ZSI6IjIwMjYtMDItMTAifQ.abc123",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "booking",
                "cancel"
              ],
              "query": [
                {
                  "key": "token",
                  "value": "eyJ0ZW5hbnRJZCI6IjAxSFhZWi4uLiIsImV2ZW50SWQiOiJldnRfMTIzIiwiZGF0ZSI6IjIwMjYtMDItMTAifQ.abc123"
                }
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Preview cancellation details for a booking. Returns event info, refund calculation based on cancellation policy, and deadline status. Requires a valid HMAC cancel token from the booking confirmation email."
          }
        },
        {
          "name": "Cancel Booking - Execute (Public)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"eyJ0ZW5hbnRJZCI6IjAxSFhZWi4uLiIsImV2ZW50SWQiOiJldnRfMTIzIiwiZGF0ZSI6IjIwMjYtMDItMTAifQ.abc123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/booking/cancel",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "booking",
                "cancel"
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Execute booking cancellation. Verifies token, processes Stripe refund (full/partial based on cancellation policy), updates event status, and sends cancellation emails to visitor and tenant."
          }
        },
        {
          "name": "Submit Contact Form",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Smith\",\n  \"email\": \"jane@example.com\",\n  \"message\": \"Hi, I'd like to learn more about your services.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/contact",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "contact"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Submit a contact form message. Stores the submission and sends a notification email to the tenant. Returns { contactId }."
          }
        },
        {
          "name": "Public AI Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hello, what services do you offer?\",\n  \"sessionMessages\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/ai/chat",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "ai", "chat"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Public chat endpoint for visitors. Returns 403 if AI assistant is not enabled for the tenant."
          }
        },
        {
          "name": "Join Meeting (Public)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Smith\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/calendar/events/:eventId/join",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "calendar",
                "events",
                ":eventId",
                "join"
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                },
                {
                  "key": "eventId",
                  "value": "evt_123..."
                }
              ]
            },
            "description": "Public endpoint to join a video meeting. Returns 100ms auth token, room ID, and role. If the caller is authenticated as the tenant owner, they get the 'host' role; otherwise 'guest'. Guests must provide a name in the request body."
          }
        }
      ]
    },
    {
      "name": "Landing Page - Authenticated",
      "item": [
        {
          "name": "Get Landing Page Config",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/tenant/landing-page",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "tenant", "landing-page"]
            },
            "description": "Get the current user's landing page config (draft and published)."
          }
        },
        {
          "name": "Update Draft Landing Page",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hero\": {\n    \"headline\": \"Welcome to My Page\",\n    \"description\": \"Book a session with me!\",\n    \"ctaText\": \"Book Now\",\n    \"ctaLink\": \"#booking\"\n  },\n  \"sectionOrder\": [\"hero\", \"valuePropositions\", \"about\", \"photoGallery\", \"act\", \"footer\"],\n  \"disabledSections\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/tenant/landing-page",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "tenant", "landing-page"]
            },
            "description": "Update the draft landing page config. Auto-saves as draft."
          }
        },
        {
          "name": "Publish Landing Page",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/tenant/publish",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "tenant", "publish"]
            },
            "description": "Publish the draft landing page. Copies draft to published."
          }
        }
      ]
    },
    {
      "name": "Domain - Authenticated",
      "description": "Domain management endpoints for BYOD (Bring Your Own Domain)",
      "item": [
        {
          "name": "Get Domain Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "status"]
            },
            "description": "Get current domain and email configuration status for the authenticated user."
          }
        },
        {
          "name": "Add Domain",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"domain\": \"mycoaching.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/add",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "add"]
            },
            "description": "Add a domain to Vercel. Returns nameservers that need to be configured at the registrar."
          }
        },
        {
          "name": "Verify Domain",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "verify"]
            },
            "description": "Trigger Vercel to re-check DNS and verify domain ownership."
          }
        },
        {
          "name": "Remove Domain",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/remove",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "remove"]
            },
            "description": "Remove domain from Vercel and clear domain/email configuration."
          }
        }
      ]
    },
    {
      "name": "Email - Authenticated",
      "description": "Email setup endpoints for custom domain email via SES",
      "item": [
        {
          "name": "Setup Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emailPrefix\": \"hello\",\n  \"forwardToEmail\": \"your@gmail.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/email/setup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "email", "setup"]
            },
            "description": "Create SES domain identity and setup email forwarding. Returns DKIM tokens and DNS records."
          }
        },
        {
          "name": "Verify Email DNS",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/email/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "email", "verify"]
            },
            "description": "Check email DNS verification status (MX, SPF, DKIM records)."
          }
        },
        {
          "name": "Disable Email",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/domain/email/disable",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "domain", "email", "disable"]
            },
            "description": "Delete SES domain identity and clear email configuration."
          }
        }
      ]
    },
    {
      "name": "AI Assistant - Authenticated",
      "description": "AI Assistant endpoints for chat widget configuration",
      "item": [
        {
          "name": "Get AI Settings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/ai/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "ai", "settings"]
            },
            "description": "Get AI assistant settings for the authenticated user."
          }
        },
        {
          "name": "Update AI Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"enabled\": true,\n  \"widgetPosition\": \"bottom-right\",\n  \"welcomeMessage\": \"Hi! How can I help you today?\",\n  \"placeholderText\": \"Type your message...\",\n  \"systemPrompt\": \"Always suggest booking a trial class.\",\n  \"businessInfo\": {\n    \"businessName\": \"Sunrise Yoga Studio\",\n    \"description\": \"A welcoming yoga studio for all levels\",\n    \"openingHours\": \"Mon-Fri 6am-8pm, Sat-Sun 8am-6pm\",\n    \"services\": \"Hatha Yoga, Vinyasa Flow, Private Sessions\",\n    \"location\": \"123 Main St, Sydney\",\n    \"contactInfo\": \"hello@sunriseyoga.com\",\n    \"additionalNotes\": \"We offer a free trial class for first-time visitors!\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/ai/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "ai", "settings"]
            },
            "description": "Update AI assistant settings. Partial updates supported."
          }
        },
        {
          "name": "Demo Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hello, tell me about your services.\",\n  \"sessionMessages\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/ai/chat",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "ai", "chat"]
            },
            "description": "Demo chat endpoint for testing AI in dashboard. Uses the tenant's custom system prompt if configured."
          }
        },
        {
          "name": "Business Setup Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"messages\": [\n    { \"role\": \"assistant\", \"content\": \"Hi! I'd love to learn about your business. What's it called?\" },\n    { \"role\": \"user\", \"content\": \"Sunrise Yoga Studio\" }\n  ],\n  \"saveIfComplete\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/ai/setup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "ai", "setup"]
            },
            "description": "AI-driven business setup chat. Uses function calling to extract structured business info from conversation. Set saveIfComplete to true to auto-save when setup is complete."
          }
        }
      ]
    },
    {
      "name": "Subscribers - Public",
      "description": "Visitor signup/signin endpoints for tenant subscribers",
      "item": [
        {
          "name": "Visitor Signup",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Jane Smith\",\n  \"email\": \"jane@example.com\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/subscribers/signup",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "subscribers",
                "signup"
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Register a new visitor with Cognito. Does NOT create a tenant. Returns requiresVerification flag."
          }
        },
        {
          "name": "Visitor Verify Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane@example.com\",\n  \"code\": \"123456\",\n  \"name\": \"Jane Smith\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/subscribers/verify",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "subscribers",
                "verify"
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Verify email with Cognito code, create subscriber record, and send welcome email."
          }
        },
        {
          "name": "Visitor Sign In",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"jane@example.com\",\n  \"password\": \"Password123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/subscribers/signin",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                ":tenantId",
                "subscribers",
                "signin"
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Sign in existing user and subscribe to tenant. Does NOT set session cookie. Returns alreadySubscribed flag if already subscribed."
          }
        }
      ]
    },
    {
      "name": "Users - Authenticated",
      "description": "Unified user list (subscribers + booking visitors) for authenticated tenants",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscribers",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "subscribers"]
            },
            "description": "List all users (registered subscribers + booking visitors) for the authenticated tenant. Returns CallyUser[] with userType field ('registered' | 'visitor'). De-duplicates by email \u2014 visitors who later signed up show as 'registered'. Sorted by newest date first."
          }
        },
        {
          "name": "Send Broadcast Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"emails\": [\"user1@example.com\", \"user2@example.com\"],\n  \"subject\": \"Hello from our studio!\",\n  \"body\": \"We have exciting news to share with you.\\n\\nSee you soon!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscribers/email",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "subscribers", "email"]
            },
            "description": "Send a broadcast email to selected users. Sends individually per recipient (not CC/BCC). Returns { sent: N, failed: N }. Sent emails are persisted in the emails table. Requires authentication."
          }
        },
        {
          "name": "Get User File",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/users/:userEmail",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "users", ":userEmail"],
              "variable": [
                {
                  "key": "userEmail",
                  "value": "user@example.com"
                }
              ]
            },
            "description": "Get user info and communication history for a specific user by email. Returns { user: CallyUser, communications: Email[], bookings: CalendarEvent[] }. Communications include all sent and received emails between the tenant and the user, sorted newest first. Requires authentication."
          }
        }
      ]
    },
    {
      "name": "Dashboard - Authenticated",
      "description": "Dashboard stats for authenticated tenants",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/dashboard",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "dashboard"]
            },
            "description": "Get dashboard statistics: total users, upcoming appointments, completed appointments. Requires authentication."
          }
        }
      ]
    },
    {
      "name": "Preferences - Authenticated",
      "description": "Tenant preferences (timezone, email display name, default event duration, regional settings, business address)",
      "item": [
        {
          "name": "Get Preferences",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/preferences",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "preferences"]
            },
            "description": "Get tenant preferences including timezone, emailDisplayName, videoCallPreference, defaultEventDuration (minutes, default 30), and address. Falls back to bookingConfig.timezone then Australia/Sydney."
          }
        },
        {
          "name": "Update Preferences",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"timezone\": \"Australia/Sydney\",\n  \"emailDisplayName\": \"My Studio Name\",\n  \"defaultEventDuration\": 30,\n  \"currency\": \"AUD\",\n  \"address\": \"123 Main St, Sydney NSW 2000\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/preferences",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "preferences"]
            },
            "description": "Update tenant preferences. Timezone must be a valid IANA timezone string. emailDisplayName (max 100 chars) customizes the sender name on outgoing emails; send empty string to clear. defaultEventDuration must be one of: 15, 30, 45, 60, 90, 120 (minutes). currency must be one of: AUD, USD, GBP, EUR, INR, NZD, CAD, SGD. address (max 300 chars) is the business address displayed on the landing page location section."
          }
        }
      ]
    },
    {
      "name": "Feedback - Public",
      "description": "Public feedback form endpoints for collecting user feedback",
      "item": [
        {
          "name": "Get Feedback Request Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/feedback?token=abc123",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "feedback"],
              "query": [
                {
                  "key": "token",
                  "value": "abc123"
                }
              ],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Validate a feedback token and return request info (recipientName, status, tenantName) for rendering the feedback form."
          }
        },
        {
          "name": "Submit Feedback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"abc123\",\n  \"rating\": 5,\n  \"message\": \"Amazing experience! Highly recommend.\",\n  \"consentToShowcase\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/:tenantId/feedback",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "tenants", ":tenantId", "feedback"],
              "variable": [
                {
                  "key": "tenantId",
                  "value": "01HXYZ..."
                }
              ]
            },
            "description": "Submit feedback for a pending request. Rating 1-5, message required. consentToShowcase controls whether it can be displayed on the landing page. Includes spam protection."
          }
        }
      ]
    },
    {
      "name": "Feedback - Authenticated",
      "description": "Feedback management endpoints for authenticated tenants",
      "item": [
        {
          "name": "Request Feedback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"name\": \"Jane Smith\",\n  \"customMessage\": \"I'd love to hear your feedback!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/feedback/request",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "feedback", "request"]
            },
            "description": "Send a feedback request email to a user. Creates a pending feedback record with a unique token and sends an email with a link to the feedback form."
          }
        },
        {
          "name": "List Feedback",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/feedback",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "feedback"]
            },
            "description": "List all feedback requests for the authenticated tenant, sorted newest first. Returns pending, submitted, and approved items."
          }
        },
        {
          "name": "Approve Feedback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"createdAt\": \"2026-02-10T10:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/feedback/:feedbackId/approve",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "feedback",
                ":feedbackId",
                "approve"
              ],
              "variable": [
                {
                  "key": "feedbackId",
                  "value": "abc123"
                }
              ]
            },
            "description": "Approve submitted feedback for display on the landing page testimonials section. Requires createdAt to reconstruct the DynamoDB sort key."
          }
        },
        {
          "name": "Remind Feedback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"createdAt\": \"2026-02-10T10:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/feedback/:feedbackId/remind",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "feedback",
                ":feedbackId",
                "remind"
              ],
              "variable": [
                {
                  "key": "feedbackId",
                  "value": "abc123"
                }
              ]
            },
            "description": "Resend the feedback request email for a pending feedback item. Increments remindCount and sets lastRemindedAt. Only works for pending (not yet submitted) feedback."
          }
        },
        {
          "name": "Revoke Feedback Approval",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"createdAt\": \"2026-02-10T10:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/feedback/:feedbackId/approve",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "feedback",
                ":feedbackId",
                "approve"
              ],
              "variable": [
                {
                  "key": "feedbackId",
                  "value": "abc123"
                }
              ]
            },
            "description": "Revoke approval for feedback. Removes it from the landing page testimonials section."
          }
        }
      ]
    },
    {
      "name": "Embed Widgets",
      "description": "Embeddable widget pages for external websites (iframe-based)",
      "item": [
        {
          "name": "Embed Booking Widget",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/embed/{{tenantId}}/booking",
              "host": ["{{baseUrl}}"],
              "path": ["embed", "{{tenantId}}", "booking"]
            },
            "description": "Renders the booking widget in an iframe-friendly layout (no app shell). Used as iframe src in embed.js."
          }
        },
        {
          "name": "Embed Contact Widget",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/embed/{{tenantId}}/contact",
              "host": ["{{baseUrl}}"],
              "path": ["embed", "{{tenantId}}", "contact"]
            },
            "description": "Renders the contact form in an iframe-friendly layout (no app shell). Used as iframe src in embed.js."
          }
        },
        {
          "name": "Embed Chat Widget",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/embed/{{tenantId}}/chat",
              "host": ["{{baseUrl}}"],
              "path": ["embed", "{{tenantId}}", "chat"]
            },
            "description": "Renders the AI chat widget in an iframe-friendly layout (no app shell). Chat panel is always open, filling the iframe."
          }
        }
      ]
    },
    {
      "name": "Calendar",
      "item": [
        {
          "name": "Get Calendar Events",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar?start=2026-02-01T00:00:00Z&end=2026-02-28T23:59:59Z",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "calendar"],
              "query": [
                { "key": "start", "value": "2026-02-01T00:00:00Z" },
                { "key": "end", "value": "2026-02-28T23:59:59Z" }
              ]
            },
            "description": "Get calendar events for a date range. Returns CalendarItem[] including Cally events, Google Calendar events, and Outlook events. Recurring events include recurrenceGroupId in extendedProps."
          }
        },
        {
          "name": "Create Event",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Team Meeting\",\n  \"description\": \"Weekly standup\",\n  \"startTime\": \"2026-02-15T09:00:00.000Z\",\n  \"endTime\": \"2026-02-15T10:00:00.000Z\",\n  \"location\": \"Office\",\n  \"color\": \"#6366f1\",\n  \"isAllDay\": false,\n  \"hasVideoConference\": false,\n  \"attendees\": [\n    { \"email\": \"alice@example.com\", \"name\": \"Alice\" },\n    { \"email\": \"bob@example.com\", \"name\": \"Bob\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "calendar"]
            },
            "description": "Create a single calendar event. Set hasVideoConference to true to create a video room (Zoom/Google Meet/100ms based on tenant preference). Include attendees array to invite users; invite emails are sent automatically."
          }
        },
        {
          "name": "Create Recurring Event",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Weekly Yoga Class\",\n  \"description\": \"Morning yoga session\",\n  \"startTime\": \"2026-02-17T09:00:00.000Z\",\n  \"endTime\": \"2026-02-17T10:00:00.000Z\",\n  \"location\": \"Studio\",\n  \"color\": \"#22c55e\",\n  \"isAllDay\": false,\n  \"recurrenceRule\": {\n    \"frequency\": \"weekly\",\n    \"interval\": 1,\n    \"daysOfWeek\": [2],\n    \"end\": {\n      \"afterOccurrences\": 10\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "calendar"]
            },
            "description": "Create a recurring event series. Expands into individual events linked by recurrenceGroupId. Max 52 occurrences. Video conferencing not supported for recurring events. Frequency options: daily, weekly, monthly, yearly, weekday. For weekly: daysOfWeek (0=Sun..6=Sat). For monthly: monthlyMode (dayOfMonth or dayOfWeek). End: afterOccurrences (1-52) or onDate (YYYY-MM-DD)."
          }
        },
        {
          "name": "Get Event By ID",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}"
              ]
            },
            "description": "Get a single calendar event by ID. Returns full CalendarEvent with recurrenceGroupId and recurrenceRule (if first in series)."
          }
        },
        {
          "name": "Update Event",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Meeting\",\n  \"description\": \"Updated description\",\n  \"status\": \"scheduled\",\n  \"attendees\": [\n    { \"email\": \"alice@example.com\", \"name\": \"Alice\" }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}"
              ]
            },
            "description": "Update a calendar event. Supports partial updates. For recurring events, updates only the individual instance."
          }
        },
        {
          "name": "Update Future Events",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Meeting\",\n  \"description\": \"Updated description\",\n  \"location\": \"New Location\",\n  \"startTime\": \"2025-03-15T10:00:00.000Z\",\n  \"endTime\": \"2025-03-15T11:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}?updateFuture=true",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}"
              ],
              "query": [{ "key": "updateFuture", "value": "true" }]
            },
            "description": "Update a recurring calendar event and apply time changes to all future events in the series. Computes the time delta from the clicked event and shifts all future events by the same amount. Also applies title, description, and location changes to future events."
          }
        },
        {
          "name": "Delete Event",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}"
              ]
            },
            "description": "Delete a single calendar event. Also removes from Google Calendar and Outlook Calendar if synced."
          }
        },
        {
          "name": "Delete All In Series",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Cookie", "value": "session={{sessionToken}}" }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}?deleteAll=true",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}"
              ],
              "query": [{ "key": "deleteAll", "value": "true" }]
            },
            "description": "Delete all events in a recurrence series. Uses the event's recurrenceGroupId to find and batch-delete all instances. Returns { deleted: true, count: N }. Also removes each instance from Google/Outlook Calendar."
          }
        }
      ]
    },
    {
      "name": "Transcription",
      "item": [
        {
          "name": "Upload Audio (Get Presigned URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileSizeBytes\": 1048576,\n  \"fileName\": \"recording.webm\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}/transcript/upload",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}",
                "transcript",
                "upload"
              ]
            },
            "description": "Generate a presigned S3 URL for uploading meeting audio. Creates a transcript record in DynamoDB with 'uploading' status."
          }
        },
        {
          "name": "Get Transcript",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}/transcript",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}",
                "transcript"
              ]
            },
            "description": "Get transcript data for a calendar event. Returns status, transcript text, summary, speaker segments, and topics."
          }
        },
        {
          "name": "Queue Transcription",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}/transcript",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}",
                "transcript"
              ]
            },
            "description": "Queue a transcript for processing after audio upload is complete. Updates status to 'queued' and sends SQS message."
          }
        },
        {
          "name": "Start Recording (with Transcription)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}/recording/start",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}",
                "recording",
                "start"
              ]
            },
            "description": "Start 100ms server-side recording with post-call transcription enabled. Calls 100ms Recording API with transcription config (JSON + TXT output, summary with key points and action items). Creates a transcript record with 'recording' status."
          }
        },
        {
          "name": "Stop Recording",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "session={{sessionToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/calendar/events/{{eventId}}/recording/stop",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "calendar",
                "events",
                "{{eventId}}",
                "recording",
                "stop"
              ]
            },
            "description": "Stop 100ms server-side recording. Updates transcript status to 'processing'. 100ms will fire a webhook when transcription completes."
          }
        }
      ]
    },
    {
      "name": "Webhooks",
      "item": [
        {
          "name": "100ms Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"transcription.success\",\n  \"data\": {\n    \"room_id\": \"test-room-id\",\n    \"session_id\": \"test-session\",\n    \"duration\": 300,\n    \"transcript_json_presigned_url\": \"https://example.com/transcript.json\",\n    \"summary_json_presigned_url\": \"https://example.com/summary.json\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/webhooks/100ms",
              "host": ["{{baseUrl}}"],
              "path": ["api", "webhooks", "100ms"]
            },
            "description": "100ms webhook endpoint. Handles transcription.success (downloads transcript + summary, stores in DynamoDB) and transcription.failure (updates status to failed). Configure webhook URL in 100ms Dashboard > Developer > Webhook URL."
          }
        }
      ]
    },
    {
      "name": "Surveys",
      "item": [
        {
          "name": "List Surveys (Auth)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "surveys"]
            },
            "description": "List all surveys for the authenticated tenant (newest first)."
          }
        },
        {
          "name": "Create Survey (Auth)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Customer Satisfaction Survey\",\n  \"description\": \"Help us improve our service\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "surveys"]
            },
            "description": "Create a new draft survey."
          }
        },
        {
          "name": "Get Survey (Auth)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "surveys", "{{surveyId}}"]
            },
            "description": "Get a single survey with full question data."
          }
        },
        {
          "name": "Update Survey (Auth)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"createdAt\": \"2026-01-01T00:00:00.000Z\",\n  \"title\": \"Updated Survey Title\",\n  \"questions\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "surveys", "{{surveyId}}"]
            },
            "description": "Update survey title, description, questions, or contactInfo. Requires createdAt for DynamoDB SK."
          }
        },
        {
          "name": "Delete Survey (Auth)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"createdAt\": \"2026-01-01T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "surveys", "{{surveyId}}"]
            },
            "description": "Delete a survey. Requires createdAt for DynamoDB SK."
          }
        },
        {
          "name": "Change Survey Status (Auth)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"active\",\n  \"createdAt\": \"2026-01-01T00:00:00.000Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}/status",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "surveys",
                "{{surveyId}}",
                "status"
              ]
            },
            "description": "Change survey status. Valid values: active, closed, archived."
          }
        },
        {
          "name": "List Survey Responses (Auth)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}/responses",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "surveys",
                "{{surveyId}}",
                "responses"
              ]
            },
            "description": "List all responses for a survey (newest first)."
          }
        },
        {
          "name": "Duplicate Survey (Auth)",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/surveys/{{surveyId}}/duplicate",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "surveys",
                "{{surveyId}}",
                "duplicate"
              ]
            },
            "description": "Duplicate a survey as a new draft. Copies all questions, options, branches, and contact info with new IDs."
          }
        },
        {
          "name": "Get Public Survey",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/{{tenantId}}/surveys/{{surveyId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                "{{tenantId}}",
                "surveys",
                "{{surveyId}}"
              ]
            },
            "description": "Get active survey info for public rendering (title, description, questions)."
          }
        },
        {
          "name": "Submit Survey Response (Public)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"answers\": [\n    { \"questionId\": \"q1\", \"answer\": \"option1\" },\n    { \"questionId\": \"q2\", \"answer\": \"Great experience!\" }\n  ],\n  \"contactInfo\": {\n    \"name\": \"Jane Doe\",\n    \"email\": \"jane@example.com\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/tenants/{{tenantId}}/surveys/{{surveyId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "tenants",
                "{{tenantId}}",
                "surveys",
                "{{surveyId}}"
              ]
            },
            "description": "Submit a survey response (public, no auth required). Includes spam protection."
          }
        }
      ]
    },
    {
      "name": "Products - Authenticated",
      "description": "Product catalog CRUD endpoints for authenticated tenants",
      "item": [
        {
          "name": "List Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "products"]
            },
            "description": "List all products for the authenticated tenant (sorted by sortOrder asc, then createdAt asc)."
          }
        },
        {
          "name": "Create Product",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Hair Cut\",\n  \"description\": \"Professional haircut service\",\n  \"durationMinutes\": 30,\n  \"price\": 4000,\n  \"color\": \"#6366f1\",\n  \"isActive\": true,\n  \"sortOrder\": 0\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "products"]
            },
            "description": "Create a new product. Price is in smallest currency unit (cents). Duration 5-480 minutes. Name required."
          }
        },
        {
          "name": "Get Product",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/products/:productId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "products", ":productId"],
              "variable": [
                {
                  "key": "productId",
                  "value": "product-uuid"
                }
              ]
            },
            "description": "Get a single product by ID."
          }
        },
        {
          "name": "Update Product",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Premium Hair Cut\",\n  \"price\": 5000,\n  \"durationMinutes\": 45,\n  \"color\": \"#3b82f6\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/products/:productId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "products", ":productId"],
              "variable": [
                {
                  "key": "productId",
                  "value": "product-uuid"
                }
              ]
            },
            "description": "Update a product. Supports partial updates. Same validation as create."
          }
        },
        {
          "name": "Delete Product",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/products/:productId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "products", ":productId"],
              "variable": [
                {
                  "key": "productId",
                  "value": "product-uuid"
                }
              ]
            },
            "description": "Delete a product by ID."
          }
        }
      ]
    },
    {
      "name": "Google Calendar - Authenticated",
      "item": [
        {
          "name": "Connect Google Calendar",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/google-calendar/connect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "google-calendar", "connect"]
            },
            "description": "Redirects to Google OAuth consent screen. Opens in browser \u2014 not callable from Postman directly."
          }
        },
        {
          "name": "Google Calendar Callback",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/google-calendar/callback?code=AUTH_CODE&state=BASE64_STATE",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "google-calendar", "callback"],
              "query": [
                {
                  "key": "code",
                  "value": "AUTH_CODE"
                },
                {
                  "key": "state",
                  "value": "BASE64_STATE"
                }
              ]
            },
            "description": "OAuth callback handler. Exchanges code for tokens and stores config. Called by Google \u2014 not directly."
          }
        },
        {
          "name": "Get Google Calendar Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/google-calendar/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "google-calendar", "status"]
            },
            "description": "Returns Google Calendar connection status: connected, email, blockBookingSlots, connectedAt."
          }
        },
        {
          "name": "Update Google Calendar Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"blockBookingSlots\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/google-calendar/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "google-calendar", "settings"]
            },
            "description": "Updates Google Calendar preferences. Currently supports blockBookingSlots toggle."
          }
        },
        {
          "name": "Disconnect Google Calendar",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/google-calendar/disconnect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "google-calendar", "disconnect"]
            },
            "description": "Revokes Google OAuth token and removes Google Calendar config from tenant."
          }
        }
      ]
    },
    {
      "name": "Outlook Calendar - Authenticated",
      "item": [
        {
          "name": "Connect Outlook Calendar",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/connect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "connect"]
            },
            "description": "Redirects to Microsoft OAuth consent screen. Opens in browser  not callable from Postman directly."
          }
        },
        {
          "name": "Outlook Calendar Callback",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/callback?code=AUTH_CODE&state=BASE64_STATE",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "callback"],
              "query": [
                {
                  "key": "code",
                  "value": "AUTH_CODE"
                },
                {
                  "key": "state",
                  "value": "BASE64_STATE"
                }
              ]
            },
            "description": "OAuth callback handler. Exchanges code for tokens and stores config. Called by Microsoft  not directly."
          }
        },
        {
          "name": "Get Outlook Calendar Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "status"]
            },
            "description": "Returns Outlook Calendar connection status: connected, email, blockBookingSlots, connectedAt."
          }
        },
        {
          "name": "Update Outlook Calendar Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"blockBookingSlots\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "settings"]
            },
            "description": "Updates Outlook Calendar preferences. Currently supports blockBookingSlots toggle."
          }
        },
        {
          "name": "Disconnect Outlook Calendar",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/disconnect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "disconnect"]
            },
            "description": "Clears stored tokens and removes Outlook Calendar config from tenant."
          }
        },
        {
          "name": "Sync Existing Events to Outlook",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/outlook-calendar/sync",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "outlook-calendar", "sync"]
            },
            "description": "One-time bulk push of existing Cally events to Outlook Calendar. Skips events already synced."
          }
        }
      ]
    },
    {
      "name": "Zoom - Authenticated",
      "item": [
        {
          "name": "Connect Zoom",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/zoom/connect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "zoom", "connect"]
            },
            "description": "Redirects to Zoom OAuth consent screen. Opens in browser  not callable from Postman directly."
          }
        },
        {
          "name": "Zoom Callback",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/zoom/callback?code=AUTH_CODE&state=BASE64_STATE",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "zoom", "callback"],
              "query": [
                {
                  "key": "code",
                  "value": "AUTH_CODE"
                },
                {
                  "key": "state",
                  "value": "BASE64_STATE"
                }
              ]
            },
            "description": "OAuth callback handler. Exchanges code for tokens and stores config. Called by Zoom  not directly."
          }
        },
        {
          "name": "Get Zoom Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/zoom/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "zoom", "status"]
            },
            "description": "Returns Zoom connection status: connected, email, connectedAt."
          }
        },
        {
          "name": "Disconnect Zoom",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/zoom/disconnect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "zoom", "disconnect"]
            },
            "description": "Revokes Zoom OAuth token and removes Zoom config from tenant. Resets videoCallPreference to 'cally' if it was 'zoom'."
          }
        }
      ]
    },
    {
      "name": "Inbox - Authenticated",
      "description": "Email inbox endpoints for viewing and replying to emails",
      "item": [
        {
          "name": "List Inbox Emails",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox"]
            },
            "description": "List all inbox emails for the authenticated tenant. Returns emails sorted newest first with pagination support."
          }
        },
        {
          "name": "Get Email Detail",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/:emailId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox", ":emailId"],
              "variable": [
                {
                  "key": "emailId",
                  "value": "email-id-here"
                }
              ]
            },
            "description": "Get a single email with thread messages if part of a thread."
          }
        },
        {
          "name": "Update Email Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isRead\": true,\n  \"isStarred\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/:emailId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox", ":emailId"],
              "variable": [
                {
                  "key": "emailId",
                  "value": "email-id-here"
                }
              ]
            },
            "description": "Update email read/starred status."
          }
        },
        {
          "name": "Delete Email",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/:emailId",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox", ":emailId"],
              "variable": [
                {
                  "key": "emailId",
                  "value": "email-id-here"
                }
              ]
            },
            "description": "Soft delete an email. Sets isDeleted flag with 90-day TTL."
          }
        },
        {
          "name": "Reply to Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Thank you for your email. I'll get back to you shortly.\",\n  \"attachments\": [\n    {\n      \"filename\": \"document.pdf\",\n      \"contentType\": \"application/pdf\",\n      \"size\": 12345,\n      \"s3Key\": \"reply-attachments/tenant-id/attachment-id/document.pdf\",\n      \"attachmentId\": \"attachment-id\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/:emailId/reply",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox", ":emailId", "reply"],
              "variable": [
                {
                  "key": "emailId",
                  "value": "email-id-here"
                }
              ]
            },
            "description": "Send a reply to an email. Creates an outgoing email record and starts/joins a thread. Optionally include attachments (upload via presigned URL first). Returns the stored outgoing email."
          }
        },
        {
          "name": "Download Attachment",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/:emailId/attachments/:attachmentId",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "inbox",
                ":emailId",
                "attachments",
                ":attachmentId"
              ],
              "variable": [
                {
                  "key": "emailId",
                  "value": "email-id-here"
                },
                {
                  "key": "attachmentId",
                  "value": "attachment-id-here"
                }
              ]
            },
            "description": "Get a presigned S3 download URL for an email attachment. URL expires in 5 minutes. Returns { downloadUrl, filename, mimeType, expiresIn }."
          }
        },
        {
          "name": "Upload Reply Attachment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"filename\": \"document.pdf\",\n  \"contentType\": \"application/pdf\",\n  \"size\": 12345\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/inbox/attachments/upload",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "inbox", "attachments", "upload"]
            },
            "description": "Get a presigned S3 PUT URL for uploading an attachment to include in a reply. URL expires in 10 minutes. Max file size: 10MB. Returns { uploadUrl, attachmentId, s3Key, filename, contentType, expiresIn }."
          }
        }
      ]
    },
    {
      "name": "Cron Jobs",
      "description": "Vercel Cron job endpoints (require CRON_SECRET authorization)",
      "item": [
        {
          "name": "Morning Briefing Cron",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{cronSecret}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cron/morning-briefing",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cron", "morning-briefing"]
            },
            "description": "Trigger morning briefing calls for eligible tenants. Runs every 15 minutes via Vercel Cron."
          }
        },
        {
          "name": "Event Reminders Cron",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{cronSecret}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cron/event-reminders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cron", "event-reminders"]
            },
            "description": "Send event reminder emails to attendees. Checks events starting in ~24h and ~10m windows. Runs every 5 minutes via Vercel Cron. Returns { checked, reminded24h, reminded10m, errors, durationMs }."
          }
        },
        {
          "name": "Mark Completed Cron",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{cronSecret}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/cron/mark-completed",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cron", "mark-completed"]
            },
            "description": "Mark past scheduled events as completed. Scans events from 30 days ago to yesterday with status 'scheduled' and updates them to 'completed'. Runs daily at 2 AM UTC via Vercel Cron. Returns { tenantsProcessed, eventsChecked, eventsCompleted, errors, durationMs }."
          }
        }
      ]
    },
    {
      "name": "Stripe Connect",
      "item": [
        {
          "name": "Connect Stripe (redirect)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/connect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "connect"]
            },
            "description": "Starts Stripe Connect onboarding. Creates Express account and redirects to Stripe. Requires auth."
          }
        },
        {
          "name": "Stripe Callback (redirect)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/callback?tenantId=YOUR_TENANT_ID",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "callback"],
              "query": [
                {
                  "key": "tenantId",
                  "value": "YOUR_TENANT_ID"
                }
              ]
            },
            "description": "Return URL from Stripe onboarding. Updates account status and redirects to settings."
          }
        },
        {
          "name": "Stripe Refresh (redirect)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/refresh?tenantId=YOUR_TENANT_ID",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "refresh"],
              "query": [
                {
                  "key": "tenantId",
                  "value": "YOUR_TENANT_ID"
                }
              ]
            },
            "description": "Refreshes expired Stripe onboarding link and redirects."
          }
        },
        {
          "name": "Stripe Status",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "status"]
            },
            "description": "Returns Stripe Connect connection status: connected, chargesEnabled, detailsSubmitted, email, applicationFeePercent, connectedAt."
          }
        },
        {
          "name": "Disconnect Stripe",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/disconnect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "disconnect"]
            },
            "description": "Removes Stripe config from tenant. Does not delete the Stripe account."
          }
        },
        {
          "name": "Update Stripe Settings",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationFeePercent\": 5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/data/app/stripe/settings",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "stripe", "settings"]
            },
            "description": "Updates application fee percentage (0-100) on Stripe config."
          }
        },
        {
          "name": "Stripe Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "stripe-signature",
                "value": "YOUR_STRIPE_SIGNATURE"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/stripe/webhook",
              "host": ["{{baseUrl}}"],
              "path": ["api", "stripe", "webhook"]
            },
            "description": "Public Stripe webhook. Handles checkout.session.completed (confirms booking) and checkout.session.expired (frees slot)."
          }
        }
      ]
    },
    {
      "name": "Subscription",
      "item": [
        {
          "name": "Checkout Redirect",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscription/checkout-redirect?tier=professional",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "data",
                "app",
                "subscription",
                "checkout-redirect"
              ],
              "query": [
                {
                  "key": "tier",
                  "value": "professional",
                  "description": "Subscription tier: starter, professional, or business"
                }
              ]
            },
            "description": "Authenticated. Creates Stripe Customer + Checkout Session and redirects (302) to Stripe Checkout. If already subscribed, redirects to settings."
          }
        },
        {
          "name": "Success Callback",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscription/success?session_id=cs_test_xxx",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "subscription", "success"],
              "query": [
                {
                  "key": "session_id",
                  "value": "cs_test_xxx",
                  "description": "Stripe Checkout session ID"
                }
              ]
            },
            "description": "Authenticated. Callback from Stripe Checkout. Saves subscription config and redirects to settings page."
          }
        },
        {
          "name": "Get Status",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscription/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "subscription", "status"]
            },
            "description": "Authenticated. Returns tenant subscription config or { hasSubscription: false }."
          }
        },
        {
          "name": "Customer Portal",
          "request": {
            "method": "POST",
            "url": {
              "raw": "{{baseUrl}}/api/data/app/subscription/portal",
              "host": ["{{baseUrl}}"],
              "path": ["api", "data", "app", "subscription", "portal"]
            },
            "description": "Authenticated. Creates Stripe Customer Portal session and returns portalUrl for billing management."
          }
        },
        {
          "name": "Subscription Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "stripe-signature",
                "value": "{{stripeSignature}}",
                "description": "Stripe webhook signature"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/stripe/subscription-webhook",
              "host": ["{{baseUrl}}"],
              "path": ["api", "stripe", "subscription-webhook"]
            },
            "description": "Public Stripe webhook for subscription lifecycle events. Handles customer.subscription.created/updated/deleted, trial_will_end, and invoice.payment_failed."
          }
        }
      ]
    },
    {
      "name": "Admin (Localhost Only)",
      "item": [
        {
          "name": "List Tenants",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/supa/tenants",
              "host": ["{{baseUrl}}"],
              "path": ["api", "supa", "tenants"]
            },
            "description": "List all tenants with basic info. Localhost only."
          }
        },
        {
          "name": "Delete Tenant",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tenantId\": \"TENANT_ID_HERE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/supa/delete-tenant",
              "host": ["{{baseUrl}}"],
              "path": ["api", "supa", "delete-tenant"]
            },
            "description": "Delete all data for a tenant (main table, emails, domain lookups). Localhost only. Returns deletion counts per entity type."
          }
        }
      ]
    }
  ]
}
